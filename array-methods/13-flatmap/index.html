<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flat Map</title>
</head>
<body>
    <script>
        //posee la funcion intermedia entre flat(aplanar un array) y map de transformarlo
        //esto a medida que lo va aplanando
        const users = [
            {userId: 1, username: 'Tom', atributes: ['Nice', 'Cute']},
            {userId: 2, username: 'Mike', atributes: ['Lovely']},
            {userId: 3, username: 'Nico', atributes: ['Nice', 'Cool']},
        ];

        //Como construir una array con todos los atributos de los usuarios

        function getAtributes(users) {
            const atributes = [];
            for(let user of users) {
                atributes.push(...user.atributes);
            }
            return atributes;
        }
        console.log('function:',getAtributes(users));

        //Utilizando map

        const rta = users.map(user => user.atributes).flat(1);
        console.log('map:', rta);
        
        //Utilizando flatMap
        
        const rta2 = users.flatMap(user => user.atributes);
        console.log('flatMap:', rta2);
        
        //Del siguiente objeto solo se desean las fechas de inicio
        const calendars = {
            primaryCalendar: [
                {
                startDate: new Date(2021, 1, 1, 15),
                endDate: new Date(2021, 1, 1, 15, 30),
                title: "Cita 1",
                },
                {
                startDate: new Date(2021, 1, 1, 17),
                endDate: new Date(2021, 1, 1, 18),
                title: "Cita 2",
                },
            ],
            secondaryCalendar: [
                {
                startDate: new Date(2021, 1, 1, 12),
                endDate: new Date(2021, 1, 1, 12, 30),
                title: "Cita 2",
                },
                {
                startDate: new Date(2021, 1, 1, 9),
                endDate: new Date(2021, 1, 1, 10),
                title: "Cita 4",
                },
            ],
        };

        //primera respuesta con flat y map por separado

        const values = Object.values(calendars);
        const dateStart = values.flat().map(date => date.startDate);

        //segunda respuesta con flatmap

        const otherRta = values.flatMap(item => {
            return item.map(date => date.startDate);
        });

    </script>
</body>
</html>